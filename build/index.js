(()=>{"use strict";const t=[{id:0,name:"First level",map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,3,0,3,0,0,1,1,1,2,1,1,1,1,1,2,1,1,1,2,1,0,0,0,0,0,0,0,0,1],[1,0,0,3,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,1,1,1,1,1],[1,0,0,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,3,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[1,0,0,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,1,1,1,1,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,3,3,3,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[1,0,0,0,0,0,0,0,0,3,3,3,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,3,3,3,0,0,3,3,3,0,0,0,0,0,0,0,0,0,3,1,1,1,1,1],[1,0,0,0,0,0,0,0,0,3,3,3,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,4,0,0,4,2,0,2,2,2,2,2,2,2,2,0,2,4,4,0,0,4,0,0,0,0,0,0,0,1],[1,0,0,4,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,4,0,0,0,0,0,0,0,1],[1,0,0,4,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,4,0,0,0,0,0,0,0,1],[1,0,0,4,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,4,0,0,0,0,0,0,0,1],[1,0,0,4,3,3,4,2,2,2,2,2,2,2,2,2,2,2,2,2,4,3,3,4,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]]}];class e{constructor(t){this.id=t,this.pos={x:0,y:0},this.speed=0,this.moveSpeed=0,this.rotation=0,this.direction=0,this.rotationSpeed=0}}class i extends e{constructor(t){super(t),this.id=t,this.pos={x:16,y:10},this.speed=0,this.moveSpeed=.018,this.rotation=0,this.direction=0,this.rotationSpeed=6*Math.PI/1800}}class s{constructor(){this.stripWidth=2,this.screenStrips=[],this.screen=document.createElement("div"),this.width=640,this.height=480,this.screen.id="screen",document.body.prepend(this.screen),this.init()}init(){const t=document.createElement("div");t.id="floor";const e=document.createElement("div");e.id="ceiling";const i=document.createElement("div");i.id="level";const s=document.createElement("div");s.id="hand",this.screen.appendChild(t),this.screen.appendChild(e),this.screen.appendChild(i),this.screen.appendChild(s);for(let t=0;t<this.width;t+=this.stripWidth){const e=document.createElement("div");e.style.position="absolute",e.style.left=t+"px",e.style.width=this.stripWidth+"px",e.style.height="0px",e.style.overflow="hidden",e.style.backgroundColor="magenta";const s=new Image;s.src="public/walls.png",s.style.position="absolute",s.style.left="0px",e.appendChild(s),e.img=s,this.screenStrips.push(e),i.appendChild(e)}}drawRay(){}castSingleRay(){}drawMiniMap(){}updateMiniMap(){}}var a;!function(t){t[t.Playing=0]="Playing",t[t.GameOver=1]="GameOver",t[t.Paused=2]="Paused",t[t.Inventory=3]="Inventory",t[t.Trading=4]="Trading",t[t.MainMenu=5]="MainMenu"}(a||(a={}));const h=document.querySelector("#miniMap"),o=document.querySelector("#miniMapObjects");let r=0;const n=60*Math.PI/180/2,l=Math.ceil(160),p=160/Math.tan(n),d=2*Math.PI,y=document.querySelector("#debugScreen");const c=new class{constructor(){this.state="mainmenu",this.mapWidth=0,this.mapHeight=0,this.drawMiniMap=()=>{h.width=8*this.mapWidth,h.height=8*this.mapHeight,h.style.width=8*this.mapWidth+"px";const t=h.getContext("2d");for(let e=0;e<this.mapHeight;e++)for(let i=0;i<this.mapWidth;i++)this.level.map[e][i]>0&&(t.fillStyle="black",t.fillRect(8*i,8*e,8,8))},this.updateMiniMap=()=>{o.width=8*this.mapWidth,o.height=8*this.mapHeight;const t=o.getContext("2d");t.clearRect(0,0,h.width,h.height),t.fillStyle="yellowgreen",t.fillRect(8*this.player.pos.x-2,8*this.player.pos.y-2,4,4),t.beginPath(),t.moveTo(8*this.player.pos.x,8*this.player.pos.y),t.lineTo(8*(this.player.pos.x+4*Math.cos(this.player.rotation)),8*(this.player.pos.y+4*Math.sin(this.player.rotation))),t.closePath(),t.stroke()},this.player=new i("player"),this.renderer=new s,this.state="mainmenu",this.level=t[0],this.setup()}castRays(){let t=0;for(let e=0;e<l;e++){const i=2*(-l/2+e),s=Math.sqrt(i*i+p*p),a=Math.asin(i/s);this.castSingleRay(this.player.rotation+a,t++)}}castSingleRay(t,e){(t%=d)<0&&(t+=d);for(var i=t>.75*d||t<.25*d,s=t<0||t>Math.PI,a=0,h=Math.sin(t),o=Math.cos(t),r=0,n=0,l=0,y=0,c=i?1:-1,m=c*(f=h/o),u=i?Math.ceil(this.player.pos.x):Math.floor(this.player.pos.x),M=this.player.pos.y+(u-this.player.pos.x)*f;u>=0&&u<this.mapWidth&&M>=0&&M<this.mapHeight;){var g=Math.floor(u+(i?0:-1)),v=Math.floor(M);if(this.level.map[v][g]>0){r=(S=u-this.player.pos.x)*S+(b=M-this.player.pos.y)*b,a=this.level.map[v][g],y=M%1,i||(y=1-y),n=u,l=M,!0;break}u+=c,M+=m}var f,w=s?-1:1,x=w*(f=o/h);for(M=s?Math.floor(this.player.pos.y):Math.ceil(this.player.pos.y),u=this.player.pos.x+(M-this.player.pos.y)*f;u>=0&&u<this.mapWidth&&M>=0&&M<this.mapHeight;){g=Math.floor(M+(i?0:-1)),v=M>>0;if(this.level.map[v][g]>0){var S,b,P=(S=u-this.player.pos.x)*S+(b=M-this.player.pos.y)*b;(!r||P<r)&&(r=P,n=u,l=M,a=this.level.map[v][g],y=u%1,s&&(y=1-y));break}u+=x,M+=w}if(r){this.drawRay(n,l);var k=this.renderer.screenStrips[e];r=Math.sqrt(r),r*=Math.cos(this.player.rotation-t);var W=Math.round(p/r),R=2*W,C=Math.round((200-W)/2);k.style.height=W+"px",k.style.top=C+"px",k.img.style.height=Math.floor(4*W)+"px",k.img.style.width=Math.floor(2*R)+"px",k.img.style.top=-Math.floor(W*(a-1))+"px";var E=Math.round(y*R);E>R-2&&(E=R-2),k.img.style.left=-E+"px"}}bindKeys(){const t=document.querySelector("#hand");document.addEventListener("keydown",(e=>{switch(e.code){case"KeyW":this.player.speed=1,t.style.animation="walk 1.5s infinite";break;case"KeyS":this.player.speed=-1,t.style.animation="walk 1.5s infinite";break;case"KeyA":this.player.direction=-1,t.style.animation="walk 1.5s infinite";break;case"KeyD":this.player.direction=1,t.style.animation="walk 1.5s infinite"}})),document.addEventListener("keyup",(e=>{switch(e.code){case"KeyW":case"KeyS":this.player.speed=0,t.style.animation="";break;case"KeyA":case"KeyD":this.player.direction=0,t.style.animation=""}}))}drawRay(t,e){var i=document.querySelector("#miniMapObjects").getContext("2d");i.strokeStyle="rgba(0,100,0,0.3)",i.lineWidth=.5,i.beginPath(),i.moveTo(8*this.player.pos.x,8*this.player.pos.y),i.lineTo(8*t,8*e),i.closePath(),i.stroke()}setup(){const t=document.querySelector("canvas");t.width=160,t.height=120,this.mapWidth=this.level.map[0].length,this.mapHeight=this.level.map.length,this.bindKeys(),this.drawMiniMap(),this.loop(0)}isBlocking(t,e){return e<0||e>=this.mapHeight||t<0||t>=this.mapWidth||0!==this.level.map[Math.floor(e)][Math.floor(t)]}movePlayer(){const t=this.player.moveSpeed*this.player.speed;this.player.rotation+=this.player.direction*this.player.rotationSpeed;const e=this.player.pos.x+Math.cos(this.player.rotation)*t,i=this.player.pos.y+Math.sin(this.player.rotation)*t;this.isBlocking(e,i)?console.log("is collide"):(this.player.pos.x=e,this.player.pos.y=i,this.player.rotation+=this.player.direction*this.player.rotationSpeed,this.player.rotation<0&&(this.player.rotation+=2*Math.PI),this.player.rotation>=2*Math.PI&&(this.player.rotation-=2*Math.PI))}update(t){this.movePlayer(),this.updateMiniMap(),this.castRays(),y.innerText=`\n      FPS: ${Math.round(1/t)}\n      PLAYER X: ${this.player.pos.x}\n      PLAYER Y: ${this.player.pos.y}\n      DT: ${t}\n    `}loop(t){const e=r-t;r=t,this.update(e),requestAnimationFrame(this.loop.bind(this))}};window.game=c,c.setup()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJtYXBwaW5ncyI6Im1CQUFBLE1Ba0NBLEVBbENlLENBQ2IsQ0FDRSxHQUFNLEVBQ04sS0FBUSxjQUVSLElBQU8sQ0FDTCxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FDL0QsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQy9ELENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUMvRCxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FDL0QsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQy9ELENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUMvRCxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FDL0QsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQy9ELENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUMvRCxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FDL0QsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQy9ELENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUMvRCxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FDL0QsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQy9ELENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUMvRCxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FDL0QsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQy9ELENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUMvRCxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FDL0QsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQy9ELENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUMvRCxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FDL0QsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQy9ELENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxNQzdCdEQsTUFBTUEsRUFDakJDLFlBQVlDLEdBQ1JDLEtBQUtELEdBQUtBLEVBQ1ZDLEtBQUtDLElBQU0sQ0FBRUMsRUFBRyxFQUFHQyxFQUFHLEdBQ3RCSCxLQUFLSSxNQUFRLEVBQ2JKLEtBQUtLLFVBQVksRUFDakJMLEtBQUtNLFNBQVcsRUFDaEJOLEtBQUtPLFVBQVksRUFDakJQLEtBQUtRLGNBQWdCLENBQ3pCLEVDUlcsTUFBTUMsVUFBZVosRUFDaENDLFlBQVlDLEdBQ1JXLE1BQU1YLEdBQ05DLEtBQUtELEdBQUtBLEVBQ1ZDLEtBQUtDLElBQU0sQ0FBRUMsRUFBRyxHQUFJQyxFQUFHLElBQ3ZCSCxLQUFLSSxNQUFRLEVBQ2JKLEtBQUtLLFVBQVksS0FDakJMLEtBQUtNLFNBQVcsRUFDaEJOLEtBQUtPLFVBQVksRUFDakJQLEtBQUtRLGNBQWlCLEVBQUlHLEtBQUtDLEdBQU0sSUFDekMsRUNYVyxNQUFNQyxFQUNqQmYsY0FDSUUsS0FBS2MsV0FBYSxFQUNsQmQsS0FBS2UsYUFBZSxHQUNwQmYsS0FBS2dCLE9BQVNDLFNBQVNDLGNBQWMsT0FDckNsQixLQUFLbUIsTUFBUSxJQUNibkIsS0FBS29CLE9BQVMsSUFDZHBCLEtBQUtnQixPQUFPakIsR0FBSyxTQUNqQmtCLFNBQVNJLEtBQUtDLFFBQVF0QixLQUFLZ0IsUUFDM0JoQixLQUFLdUIsTUFDVCxDQUNBQSxPQUNJLE1BQU1DLEVBQVFQLFNBQVNDLGNBQWMsT0FDckNNLEVBQU16QixHQUFLLFFBQ1gsTUFBTTBCLEVBQVVSLFNBQVNDLGNBQWMsT0FDdkNPLEVBQVExQixHQUFLLFVBQ2IsTUFBTTJCLEVBQVFULFNBQVNDLGNBQWMsT0FDckNRLEVBQU0zQixHQUFLLFFBQ1gsTUFBTTRCLEVBQU9WLFNBQVNDLGNBQWMsT0FDcENTLEVBQUs1QixHQUFLLE9BQ1ZDLEtBQUtnQixPQUFPWSxZQUFZSixHQUN4QnhCLEtBQUtnQixPQUFPWSxZQUFZSCxHQUN4QnpCLEtBQUtnQixPQUFPWSxZQUFZRixHQUN4QjFCLEtBQUtnQixPQUFPWSxZQUFZRCxHQUN4QixJQUFLLElBQUlFLEVBQUksRUFBR0EsRUFBSTdCLEtBQUttQixNQUFPVSxHQUFLN0IsS0FBS2MsV0FBWSxDQUNsRCxNQUFNZ0IsRUFBUWIsU0FBU0MsY0FBYyxPQUNyQ1ksRUFBTUMsTUFBTUMsU0FBVyxXQUN2QkYsRUFBTUMsTUFBTUUsS0FBT0osRUFBSSxLQUN2QkMsRUFBTUMsTUFBTVosTUFBUW5CLEtBQUtjLFdBQWEsS0FDdENnQixFQUFNQyxNQUFNWCxPQUFTLE1BQ3JCVSxFQUFNQyxNQUFNRyxTQUFXLFNBQ3ZCSixFQUFNQyxNQUFNSSxnQkFBa0IsVUFDOUIsTUFBTUMsRUFBTSxJQUFJQyxNQUNoQkQsRUFBSUUsSUFBTSxtQkFDVkYsRUFBSUwsTUFBTUMsU0FBVyxXQUNyQkksRUFBSUwsTUFBTUUsS0FBTyxNQUNqQkgsRUFBTUYsWUFBWVEsR0FJbEJOLEVBQU1NLElBQU1BLEVBQ1pwQyxLQUFLZSxhQUFhd0IsS0FBS1QsR0FDdkJKLEVBQU1FLFlBQVlFLEVBQ3RCLENBQ0osQ0FDQVUsVUFBWSxDQUNaQyxnQkFBa0IsQ0FDbEJDLGNBQWdCLENBQ2hCQyxnQkFBa0IsRUM1Q3RCLElBQUlDLEdBQ0osU0FBV0EsR0FDUEEsRUFBVUEsRUFBbUIsUUFBSSxHQUFLLFVBQ3RDQSxFQUFVQSxFQUFvQixTQUFJLEdBQUssV0FDdkNBLEVBQVVBLEVBQWtCLE9BQUksR0FBSyxTQUNyQ0EsRUFBVUEsRUFBcUIsVUFBSSxHQUFLLFlBQ3hDQSxFQUFVQSxFQUFtQixRQUFJLEdBQUssVUFDdENBLEVBQVVBLEVBQW9CLFNBQUksR0FBSyxVQUMxQyxDQVBELENBT0dBLElBQWNBLEVBQVksQ0FBQyxJQUM5QixNQUFNQyxFQUFVNUIsU0FBUzZCLGNBQWMsWUFDakNDLEVBQWlCOUIsU0FBUzZCLGNBQWMsbUJBQzlDLElBQ0lFLEVBQVcsRUFDZixNQUlNQyxFQURPLEdBQUt0QyxLQUFLQyxHQUFNLElBQ1AsRUFDaEJzQyxFQUFVdkMsS0FBS3dDLEtBQUtDLEtBQ3BCQyxFQUFXRCxJQUFrQnpDLEtBQUsyQyxJQUFJTCxHQUN0Q00sRUFBa0IsRUFBVjVDLEtBQUtDLEdBRWI0QyxFQUFjdkMsU0FBUzZCLGNBQWMsZ0JDekIzQyxNQUFNVyxFQUFPLElEMEJFLE1BQ1gzRCxjQUNJRSxLQUFLMEQsTUFBUSxXQUNiMUQsS0FBSzJELFNBQVcsRUFDaEIzRCxLQUFLNEQsVUFBWSxFQUNqQjVELEtBQUswQyxZQUFjLEtBQ2ZHLEVBQVExQixNQWxCRCxFQWtCU25CLEtBQUsyRCxTQUNyQmQsRUFBUXpCLE9BbkJELEVBbUJVcEIsS0FBSzRELFVBQ3RCZixFQUFRZCxNQUFNWixNQXBCUCxFQW9Ca0JuQixLQUFLMkQsU0FBUixLQUN0QixNQUFNRSxFQUFNaEIsRUFBUWlCLFdBQVcsTUFDL0IsSUFBSyxJQUFJM0QsRUFBSSxFQUFHQSxFQUFJSCxLQUFLNEQsVUFBV3pELElBQ2hDLElBQUssSUFBSUQsRUFBSSxFQUFHQSxFQUFJRixLQUFLMkQsU0FBVXpELElBQzNCRixLQUFLMEIsTUFBTXFDLElBQUk1RCxHQUFHRCxHQUFLLElBQ3ZCMkQsRUFBSUcsVUFBWSxRQUNoQkgsRUFBSUksU0ExQlQsRUEwQmtCL0QsRUExQmxCLEVBMEJvQ0MsRUExQnBDLEtBNkJQLEVBRUpILEtBQUsyQyxjQUFnQixLQUNqQkksRUFBZTVCLE1BaENSLEVBZ0NnQm5CLEtBQUsyRCxTQUM1QlosRUFBZTNCLE9BakNSLEVBaUNpQnBCLEtBQUs0RCxVQUM3QixNQUFNQyxFQUFNZCxFQUFlZSxXQUFXLE1BQ3RDRCxFQUFJSyxVQUFVLEVBQUcsRUFBR3JCLEVBQVExQixNQUFPMEIsRUFBUXpCLFFBQzNDeUMsRUFBSUcsVUFBWSxjQUNoQkgsRUFBSUksU0FyQ0csRUFxQ01qRSxLQUFLbUUsT0FBT2xFLElBQUlDLEVBQW1CLEVBckN6QyxFQXFDNENGLEtBQUttRSxPQUFPbEUsSUFBSUUsRUFBbUIsRUFBRyxFQUFHLEdBQzVGMEQsRUFBSU8sWUFDSlAsRUFBSVEsT0F2Q0csRUF1Q0lyRSxLQUFLbUUsT0FBT2xFLElBQUlDLEVBdkNwQixFQXVDc0NGLEtBQUttRSxPQUFPbEUsSUFBSUUsR0FDN0QwRCxFQUFJUyxPQXhDRyxHQXdDS3RFLEtBQUttRSxPQUFPbEUsSUFBSUMsRUFBcUMsRUFBakNTLEtBQUs0RCxJQUFJdkUsS0FBS21FLE9BQU83RCxXQXhDOUMsR0F3QzhFTixLQUFLbUUsT0FBT2xFLElBQUlFLEVBQXFDLEVBQWpDUSxLQUFLNkQsSUFBSXhFLEtBQUttRSxPQUFPN0QsWUFDOUh1RCxFQUFJWSxZQUNKWixFQUFJYSxRQUFRLEVBRWhCMUUsS0FBS21FLE9BQVMsSUFBSTFELEVBQU8sVUFDekJULEtBQUsyRSxTQUFXLElBQUk5RCxFQUNwQmIsS0FBSzBELE1BQVEsV0FDYjFELEtBQUswQixNQUFRLEtBQ2IxQixLQUFLNEUsT0FDVCxDQUNBQyxXQUNJLElBQUlDLEVBQVcsRUFDZixJQUFLLElBQUlqRCxFQUFJLEVBQUdBLEVBQUlxQixFQUFTckIsSUFBSyxDQUM5QixNQUFNa0QsRUFqREMsSUFpRGdCN0IsRUFBVSxFQUFJckIsR0FDL0JtRCxFQUFjckUsS0FBS3NFLEtBQUtGLEVBQWVBLEVBQWUxQixFQUFXQSxHQUNqRTZCLEVBQVd2RSxLQUFLd0UsS0FBS0osRUFBZUMsR0FDMUNoRixLQUFLeUMsY0FBY3pDLEtBQUttRSxPQUFPN0QsU0FBVzRFLEVBQVVKLElBQ3hELENBQ0osQ0FDQXJDLGNBQWN5QyxFQUFVSixJQUVwQkksR0FBWTNCLEdBQ0csSUFDWDJCLEdBQVkzQixHQTBCaEIsSUF4QkEsSUFBSTZCLEVBQVFGLEVBQW1CLElBQVIzQixHQUFnQjJCLEVBQW1CLElBQVIzQixFQUM5QzhCLEVBQUtILEVBQVcsR0FBS0EsRUFBV3ZFLEtBQUtDLEdBQ3JDMEUsRUFBVyxFQUVYQyxFQUFXNUUsS0FBSzZELElBQUlVLEdBQ3BCTSxFQUFXN0UsS0FBSzRELElBQUlXLEdBQ3BCTyxFQUFPLEVBQ1BDLEVBQU8sRUFDUEMsRUFBTyxFQUNQQyxFQUFXLEVBU1hDLEVBQVFULEVBQVEsR0FBSyxFQUNyQlUsRUFBUUQsR0FGUkUsRUFBUVIsRUFBV0MsR0FHbkJ0RixFQUFJa0YsRUFDRnpFLEtBQUt3QyxLQUFLbkQsS0FBS21FLE9BQU9sRSxJQUFJQyxHQUMxQlMsS0FBS2EsTUFBTXhCLEtBQUttRSxPQUFPbEUsSUFBSUMsR0FDN0JDLEVBQUlILEtBQUttRSxPQUFPbEUsSUFBSUUsR0FBS0QsRUFBSUYsS0FBS21FLE9BQU9sRSxJQUFJQyxHQUFLNkYsRUFDL0M3RixHQUFLLEdBQUtBLEVBQUlGLEtBQUsyRCxVQUFZeEQsR0FBSyxHQUFLQSxFQUFJSCxLQUFLNEQsV0FBVyxDQUNoRSxJQUFJb0MsRUFBUXJGLEtBQUthLE1BQU10QixHQUFLa0YsRUFBUSxHQUFLLElBQ3JDYSxFQUFRdEYsS0FBS2EsTUFBTXJCLEdBRXZCLEdBQUlILEtBQUswQixNQUFNcUMsSUFBSWtDLEdBQU9ELEdBQVMsRUFBRyxDQUdsQ1AsR0FGSVMsRUFBUWhHLEVBQUlGLEtBQUttRSxPQUFPbEUsSUFBSUMsR0FFakJnRyxHQURYQyxFQUFRaEcsRUFBSUgsS0FBS21FLE9BQU9sRSxJQUFJRSxHQUNEZ0csRUFDL0JiLEVBQVd0RixLQUFLMEIsTUFBTXFDLElBQUlrQyxHQUFPRCxHQUNqQ0osRUFBV3pGLEVBQUksRUFDVmlGLElBQ0RRLEVBQVcsRUFBSUEsR0FDbkJGLEVBQU94RixFQUNQeUYsRUFBT3hGLEdBQ1ksRUFDbkIsS0FDSixDQUNBRCxHQUFLMkYsRUFDTDFGLEdBQUsyRixDQUNULENBS0EsSUFBSUMsRUFDQUssRUFBUWYsR0FBTSxFQUFJLEVBQ2xCZ0IsRUFBUUQsR0FGUkwsRUFBUVAsRUFBV0QsR0FLdkIsSUFGSXBGLEVBQUlrRixFQUFLMUUsS0FBS2EsTUFBTXhCLEtBQUttRSxPQUFPbEUsSUFBSUUsR0FBS1EsS0FBS3dDLEtBQUtuRCxLQUFLbUUsT0FBT2xFLElBQUlFLEdBQ25FRCxFQUFJRixLQUFLbUUsT0FBT2xFLElBQUlDLEdBQUtDLEVBQUlILEtBQUttRSxPQUFPbEUsSUFBSUUsR0FBSzRGLEVBQy9DN0YsR0FBSyxHQUFLQSxFQUFJRixLQUFLMkQsVUFBWXhELEdBQUssR0FBS0EsRUFBSUgsS0FBSzRELFdBQVcsQ0FDNURvQyxFQUFRckYsS0FBS2EsTUFBTXJCLEdBQUtpRixFQUFRLEdBQUssSUFDckNhLEVBQVE5RixHQUFLLEVBQ2pCLEdBQUlILEtBQUswQixNQUFNcUMsSUFBSWtDLEdBQU9ELEdBQVMsRUFBRyxDQUNsQyxJQUFJRSxFQUNBQyxFQUNBRyxHQUZBSixFQUFRaEcsRUFBSUYsS0FBS21FLE9BQU9sRSxJQUFJQyxHQUVSZ0csR0FEcEJDLEVBQVFoRyxFQUFJSCxLQUFLbUUsT0FBT2xFLElBQUlFLEdBQ1FnRyxJQUNuQ1YsR0FBUWEsRUFBWWIsS0FDckJBLEVBQU9hLEVBQ1BaLEVBQU94RixFQUNQeUYsRUFBT3hGLEVBQ1BtRixFQUFXdEYsS0FBSzBCLE1BQU1xQyxJQUFJa0MsR0FBT0QsR0FDakNKLEVBQVcxRixFQUFJLEVBQ1htRixJQUNBTyxFQUFXLEVBQUlBLElBRXZCLEtBQ0osQ0FDQTFGLEdBQUttRyxFQUNMbEcsR0FBS2lHLENBQ1QsQ0FDQSxHQUFJWCxFQUFNLENBQ056RixLQUFLd0MsUUFBUWtELEVBQU1DLEdBQ25CLElBQUk3RCxFQUFROUIsS0FBSzJFLFNBQVM1RCxhQUFhK0QsR0FDdkNXLEVBQU85RSxLQUFLc0UsS0FBS1EsR0FHakJBLEdBQWM5RSxLQUFLNEQsSUFBSXZFLEtBQUttRSxPQUFPN0QsU0FBVzRFLEdBSzlDLElBQUk5RCxFQUFTVCxLQUFLNEYsTUFBTWxELEVBQVdvQyxHQUUvQnRFLEVBcEpHLEVBb0pLQyxFQUdSb0YsRUFBTTdGLEtBQUs0RixPQXhKTixJQXdKNEJuRixHQUFVLEdBQy9DVSxFQUFNQyxNQUFNWCxPQUFTQSxFQUFTLEtBQzlCVSxFQUFNQyxNQUFNeUUsSUFBTUEsRUFBTSxLQUV4QjFFLEVBQU1NLElBQUlMLE1BQU1YLE9BQVNULEtBQUthLE1Bckp0QixFQXFKNEJKLEdBQXdCLEtBRTVEVSxFQUFNTSxJQUFJTCxNQUFNWixNQUFRUixLQUFLYSxNQUFjLEVBQVJMLEdBQWEsS0FFaERXLEVBQU1NLElBQUlMLE1BQU15RSxLQUFPN0YsS0FBS2EsTUFBTUosR0FBVWtFLEVBQVcsSUFBTSxLQUM3RCxJQUFJbUIsRUFBTzlGLEtBQUs0RixNQUFNWCxFQUFXekUsR0FDN0JzRixFQUFPdEYsRUFqS0osSUFrS0hzRixFQUFPdEYsRUFsS0osR0FvS1BXLEVBQU1NLElBQUlMLE1BQU1FLE1BQVF3RSxFQUFPLElBQ25DLENBQ0osQ0FDQUMsV0FDSSxNQUFNL0UsRUFBT1YsU0FBUzZCLGNBQWMsU0FDcEM3QixTQUFTMEYsaUJBQWlCLFdBQVlDLElBQ2xDLE9BQVFBLEVBQUVDLE1BQ04sSUFBSyxPQUNEN0csS0FBS21FLE9BQU8vRCxNQUFRLEVBQ3BCdUIsRUFBS0ksTUFBTStFLFVBQVkscUJBQ3ZCLE1BQ0osSUFBSyxPQUNEOUcsS0FBS21FLE9BQU8vRCxPQUFTLEVBQ3JCdUIsRUFBS0ksTUFBTStFLFVBQVkscUJBQ3ZCLE1BQ0osSUFBSyxPQUNEOUcsS0FBS21FLE9BQU81RCxXQUFhLEVBQ3pCb0IsRUFBS0ksTUFBTStFLFVBQVkscUJBQ3ZCLE1BQ0osSUFBSyxPQUNEOUcsS0FBS21FLE9BQU81RCxVQUFZLEVBQ3hCb0IsRUFBS0ksTUFBTStFLFVBQVkscUJBRS9CLElBRUo3RixTQUFTMEYsaUJBQWlCLFNBQVVDLElBQ2hDLE9BQVFBLEVBQUVDLE1BQ04sSUFBSyxPQUNMLElBQUssT0FDRDdHLEtBQUttRSxPQUFPL0QsTUFBUSxFQUNwQnVCLEVBQUtJLE1BQU0rRSxVQUFZLEdBQ3ZCLE1BQ0osSUFBSyxPQUNMLElBQUssT0FDRDlHLEtBQUttRSxPQUFPNUQsVUFBWSxFQUN4Qm9CLEVBQUtJLE1BQU0rRSxVQUFZLEdBRS9CLEdBRVIsQ0FDQXRFLFFBQVF1RSxFQUFNQyxHQUVWLElBQUlDLEVBRG1CaEcsU0FBUzZCLGNBQWMsbUJBQ2ZnQixXQUFXLE1BQzFDbUQsRUFBVUMsWUFBYyxvQkFDeEJELEVBQVVFLFVBQVksR0FDdEJGLEVBQVU3QyxZQUNWNkMsRUFBVTVDLE9BdE5DLEVBc05NckUsS0FBS21FLE9BQU9sRSxJQUFJQyxFQXROdEIsRUFzTndDRixLQUFLbUUsT0FBT2xFLElBQUlFLEdBQ25FOEcsRUFBVTNDLE9Bdk5DLEVBdU5NeUMsRUF2Tk4sRUF1TjJCQyxHQUN0Q0MsRUFBVXhDLFlBQ1Z3QyxFQUFVdkMsUUFDZCxDQUNBRSxRQUNJLE1BQU13QyxFQUFTbkcsU0FBUzZCLGNBQWMsVUFDdENzRSxFQUFPakcsTUFBUSxJQUNmaUcsRUFBT2hHLE9BQVMsSUFDaEJwQixLQUFLMkQsU0FBVzNELEtBQUswQixNQUFNcUMsSUFBSSxHQUFHc0QsT0FDbENySCxLQUFLNEQsVUFBWTVELEtBQUswQixNQUFNcUMsSUFBSXNELE9BQ2hDckgsS0FBSzBHLFdBQ0wxRyxLQUFLMEMsY0FDTDFDLEtBQUtzSCxLQUFLLEVBQ2QsQ0FDQUMsV0FBV3JILEVBQUdDLEdBRVYsT0FBSUEsRUFBSSxHQUFLQSxHQUFLSCxLQUFLNEQsV0FBYTFELEVBQUksR0FBS0EsR0FBS0YsS0FBSzJELFVBSUMsSUFBakQzRCxLQUFLMEIsTUFBTXFDLElBQUlwRCxLQUFLYSxNQUFNckIsSUFBSVEsS0FBS2EsTUFBTXRCLEdBQ3BELENBQ0FzSCxhQUNJLE1BQU1DLEVBQVd6SCxLQUFLbUUsT0FBTzlELFVBQVlMLEtBQUttRSxPQUFPL0QsTUFDckRKLEtBQUttRSxPQUFPN0QsVUFBWU4sS0FBS21FLE9BQU81RCxVQUFZUCxLQUFLbUUsT0FBTzNELGNBQzVELE1BQU1rSCxFQUFPMUgsS0FBS21FLE9BQU9sRSxJQUFJQyxFQUFJUyxLQUFLNEQsSUFBSXZFLEtBQUttRSxPQUFPN0QsVUFBWW1ILEVBQzVERSxFQUFPM0gsS0FBS21FLE9BQU9sRSxJQUFJRSxFQUFJUSxLQUFLNkQsSUFBSXhFLEtBQUttRSxPQUFPN0QsVUFBWW1ILEVBQzlEekgsS0FBS3VILFdBQVdHLEVBQU1DLEdBQ3RCQyxRQUFRQyxJQUFJLGVBR2hCN0gsS0FBS21FLE9BQU9sRSxJQUFJQyxFQUFJd0gsRUFDcEIxSCxLQUFLbUUsT0FBT2xFLElBQUlFLEVBQUl3SCxFQUNwQjNILEtBQUttRSxPQUFPN0QsVUFBWU4sS0FBS21FLE9BQU81RCxVQUFZUCxLQUFLbUUsT0FBTzNELGNBQ3hEUixLQUFLbUUsT0FBTzdELFNBQVcsSUFDdkJOLEtBQUttRSxPQUFPN0QsVUFBc0IsRUFBVkssS0FBS0MsSUFDN0JaLEtBQUttRSxPQUFPN0QsVUFBc0IsRUFBVkssS0FBS0MsS0FDN0JaLEtBQUttRSxPQUFPN0QsVUFBc0IsRUFBVkssS0FBS0MsSUFDckMsQ0FDQWtILE9BQU9DLEdBQ0gvSCxLQUFLd0gsYUFDTHhILEtBQUsyQyxnQkFDTDNDLEtBQUs2RSxXQUNMckIsRUFBWXdFLFVBQVksZ0JBQ25CckgsS0FBSzRGLE1BQU0sRUFBSXdCLHVCQUNWL0gsS0FBS21FLE9BQU9sRSxJQUFJQyxzQkFDaEJGLEtBQUttRSxPQUFPbEUsSUFBSUUsZ0JBQ3RCNEgsU0FFUixDQUNBVCxLQUFLVyxHQUNELE1BQU1GLEVBQUsvRSxFQUFXaUYsRUFDdEJqRixFQUFXaUYsRUFDWGpJLEtBQUs4SCxPQUFPQyxHQUNaRyxzQkFBc0JsSSxLQUFLc0gsS0FBS2EsS0FBS25JLE1BQ3pDLEdDMVJKb0ksT0FBTzNFLEtBQU9BLEVBQ2RBLEVBQUttQixPIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWluZWNyYWZ0MjVkLy4vc3JjL2xldmVscy5qcyIsIndlYnBhY2s6Ly9taW5lY3JhZnQyNWQvLi9zcmMvcGVyc29uLnRzIiwid2VicGFjazovL21pbmVjcmFmdDI1ZC8uL3NyYy9wbGF5ZXIudHMiLCJ3ZWJwYWNrOi8vbWluZWNyYWZ0MjVkLy4vc3JjL3JlbmRlcmVyLnRzIiwid2VicGFjazovL21pbmVjcmFmdDI1ZC8uL3NyYy9nYW1lLnRzIiwid2VicGFjazovL21pbmVjcmFmdDI1ZC8uL3NyYy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBsZXZlbHMgPSBbXG4gIHtcbiAgICBcImlkXCI6IDAsXG4gICAgXCJuYW1lXCI6IFwiRmlyc3QgbGV2ZWxcIixcbiAgICAvL3ByZXR0aWVyLWlnbm9yZVxuICAgIFwibWFwXCI6IFtcbiAgICAgIFsxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDFdLFxuICAgICAgWzEsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMV0sXG4gICAgICBbMSwwLDAsMywzLDMsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwxXSxcbiAgICAgIFsxLDAsMCwzLDAsMywwLDAsMSwxLDEsMiwxLDEsMSwxLDEsMiwxLDEsMSwyLDEsMCwwLDAsMCwwLDAsMCwwLDFdLFxuICAgICAgWzEsMCwwLDMsMCw0LDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMV0sXG4gICAgICBbMSwwLDAsMCwwLDMsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwxXSxcbiAgICAgIFsxLDAsMCwwLDAsMywwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMywxLDEsMSwxLDFdLFxuICAgICAgWzEsMCwwLDMsMCwzLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMV0sXG4gICAgICBbMSwwLDAsMywwLDQsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwyXSxcbiAgICAgIFsxLDAsMCwzLDAsMywwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDFdLFxuICAgICAgWzEsMCwwLDMsMywzLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwzLDEsMSwxLDEsMV0sXG4gICAgICBbMSwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwxXSxcbiAgICAgIFsxLDAsMCwwLDAsMCwwLDAsMCwzLDMsMywwLDAsMywzLDMsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDJdLFxuICAgICAgWzEsMCwwLDAsMCwwLDAsMCwwLDMsMywzLDAsMCwzLDMsMywwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMV0sXG4gICAgICBbMSwwLDAsMCwwLDAsMCwwLDAsMywzLDMsMCwwLDMsMywzLDAsMCwwLDAsMCwwLDAsMCwwLDMsMSwxLDEsMSwxXSxcbiAgICAgIFsxLDAsMCwwLDAsMCwwLDAsMCwzLDMsMywwLDAsMywzLDMsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDFdLFxuICAgICAgWzEsMCwwLDQsMCwwLDQsMiwwLDIsMiwyLDIsMiwyLDIsMiwwLDIsNCw0LDAsMCw0LDAsMCwwLDAsMCwwLDAsMV0sXG4gICAgICBbMSwwLDAsNCwwLDAsNCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDQsMCwwLDQsMCwwLDAsMCwwLDAsMCwxXSxcbiAgICAgIFsxLDAsMCw0LDAsMCw0LDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsNCwwLDAsNCwwLDAsMCwwLDAsMCwwLDFdLFxuICAgICAgWzEsMCwwLDQsMCwwLDQsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCw0LDAsMCw0LDAsMCwwLDAsMCwwLDAsMV0sXG4gICAgICBbMSwwLDAsNCwzLDMsNCwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDQsMywzLDQsMCwwLDAsMCwwLDAsMCwxXSxcbiAgICAgIFsxLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDFdLFxuICAgICAgWzEsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMV0sXG4gICAgICBbMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxXVxuICAgIF1cbiAgfVxuXVxuXG5leHBvcnQgZGVmYXVsdCBsZXZlbHM7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQZXJzb24ge1xuICAgIGNvbnN0cnVjdG9yKGlkKSB7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy5wb3MgPSB7IHg6IDAsIHk6IDAgfTtcbiAgICAgICAgdGhpcy5zcGVlZCA9IDA7XG4gICAgICAgIHRoaXMubW92ZVNwZWVkID0gMDtcbiAgICAgICAgdGhpcy5yb3RhdGlvbiA9IDA7XG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gMDtcbiAgICAgICAgdGhpcy5yb3RhdGlvblNwZWVkID0gMDtcbiAgICB9XG59XG4iLCJpbXBvcnQgUGVyc29uIGZyb20gXCIuL3BlcnNvblwiO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGxheWVyIGV4dGVuZHMgUGVyc29uIHtcbiAgICBjb25zdHJ1Y3RvcihpZCkge1xuICAgICAgICBzdXBlcihpZCk7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy5wb3MgPSB7IHg6IDE2LCB5OiAxMCB9O1xuICAgICAgICB0aGlzLnNwZWVkID0gMDtcbiAgICAgICAgdGhpcy5tb3ZlU3BlZWQgPSAwLjAxODtcbiAgICAgICAgdGhpcy5yb3RhdGlvbiA9IDA7XG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gMDtcbiAgICAgICAgdGhpcy5yb3RhdGlvblNwZWVkID0gKDYgKiBNYXRoLlBJKSAvIDE4MDA7XG4gICAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVuZGVyZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnN0cmlwV2lkdGggPSAyO1xuICAgICAgICB0aGlzLnNjcmVlblN0cmlwcyA9IFtdO1xuICAgICAgICB0aGlzLnNjcmVlbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMud2lkdGggPSA2NDA7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gNDgwO1xuICAgICAgICB0aGlzLnNjcmVlbi5pZCA9IFwic2NyZWVuXCI7XG4gICAgICAgIGRvY3VtZW50LmJvZHkucHJlcGVuZCh0aGlzLnNjcmVlbik7XG4gICAgICAgIHRoaXMuaW5pdCgpO1xuICAgIH1cbiAgICBpbml0KCkge1xuICAgICAgICBjb25zdCBmbG9vciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGZsb29yLmlkID0gXCJmbG9vclwiO1xuICAgICAgICBjb25zdCBjZWlsaW5nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgY2VpbGluZy5pZCA9IFwiY2VpbGluZ1wiO1xuICAgICAgICBjb25zdCBsZXZlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGxldmVsLmlkID0gXCJsZXZlbFwiO1xuICAgICAgICBjb25zdCBoYW5kID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgaGFuZC5pZCA9IFwiaGFuZFwiO1xuICAgICAgICB0aGlzLnNjcmVlbi5hcHBlbmRDaGlsZChmbG9vcik7XG4gICAgICAgIHRoaXMuc2NyZWVuLmFwcGVuZENoaWxkKGNlaWxpbmcpO1xuICAgICAgICB0aGlzLnNjcmVlbi5hcHBlbmRDaGlsZChsZXZlbCk7XG4gICAgICAgIHRoaXMuc2NyZWVuLmFwcGVuZENoaWxkKGhhbmQpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMud2lkdGg7IGkgKz0gdGhpcy5zdHJpcFdpZHRoKSB7XG4gICAgICAgICAgICBjb25zdCBzdHJpcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBzdHJpcC5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcbiAgICAgICAgICAgIHN0cmlwLnN0eWxlLmxlZnQgPSBpICsgXCJweFwiO1xuICAgICAgICAgICAgc3RyaXAuc3R5bGUud2lkdGggPSB0aGlzLnN0cmlwV2lkdGggKyBcInB4XCI7XG4gICAgICAgICAgICBzdHJpcC5zdHlsZS5oZWlnaHQgPSBcIjBweFwiO1xuICAgICAgICAgICAgc3RyaXAuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xuICAgICAgICAgICAgc3RyaXAuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJtYWdlbnRhXCI7XG4gICAgICAgICAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgICAgIGltZy5zcmMgPSBcInB1YmxpYy93YWxscy5wbmdcIjtcbiAgICAgICAgICAgIGltZy5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcbiAgICAgICAgICAgIGltZy5zdHlsZS5sZWZ0ID0gXCIwcHhcIjtcbiAgICAgICAgICAgIHN0cmlwLmFwcGVuZENoaWxkKGltZyk7XG4gICAgICAgICAgICAvLyBBc3NpZ24gdGhlIGltYWdlIHRvIGEgcHJvcGVydHkgb24gdGhlIHN0cmlwIGVsZW1lbnRcbiAgICAgICAgICAgIC8vIHNvIHdlIGhhdmUgZWFzeSBhY2Nlc3MgdG8gdGhlIGltYWdlIGxhdGVyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICBzdHJpcC5pbWcgPSBpbWc7XG4gICAgICAgICAgICB0aGlzLnNjcmVlblN0cmlwcy5wdXNoKHN0cmlwKTtcbiAgICAgICAgICAgIGxldmVsLmFwcGVuZENoaWxkKHN0cmlwKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkcmF3UmF5KCkgeyB9XG4gICAgY2FzdFNpbmdsZVJheSgpIHsgfVxuICAgIGRyYXdNaW5pTWFwKCkgeyB9XG4gICAgdXBkYXRlTWluaU1hcCgpIHsgfVxufVxuIiwiLy9AdHMtaWdub3JlXG5pbXBvcnQgbGV2ZWxzIGZyb20gXCIuL2xldmVscy5qc1wiO1xuaW1wb3J0IFBsYXllciBmcm9tIFwiLi9wbGF5ZXJcIjtcbmltcG9ydCBSZW5kZXJlciBmcm9tIFwiLi9yZW5kZXJlclwiO1xudmFyIEdhbWVTdGF0ZTtcbihmdW5jdGlvbiAoR2FtZVN0YXRlKSB7XG4gICAgR2FtZVN0YXRlW0dhbWVTdGF0ZVtcIlBsYXlpbmdcIl0gPSAwXSA9IFwiUGxheWluZ1wiO1xuICAgIEdhbWVTdGF0ZVtHYW1lU3RhdGVbXCJHYW1lT3ZlclwiXSA9IDFdID0gXCJHYW1lT3ZlclwiO1xuICAgIEdhbWVTdGF0ZVtHYW1lU3RhdGVbXCJQYXVzZWRcIl0gPSAyXSA9IFwiUGF1c2VkXCI7XG4gICAgR2FtZVN0YXRlW0dhbWVTdGF0ZVtcIkludmVudG9yeVwiXSA9IDNdID0gXCJJbnZlbnRvcnlcIjtcbiAgICBHYW1lU3RhdGVbR2FtZVN0YXRlW1wiVHJhZGluZ1wiXSA9IDRdID0gXCJUcmFkaW5nXCI7XG4gICAgR2FtZVN0YXRlW0dhbWVTdGF0ZVtcIk1haW5NZW51XCJdID0gNV0gPSBcIk1haW5NZW51XCI7XG59KShHYW1lU3RhdGUgfHwgKEdhbWVTdGF0ZSA9IHt9KSk7XG5jb25zdCBtaW5pTWFwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtaW5pTWFwXCIpO1xuY29uc3QgbWluaU1hcE9iamVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21pbmlNYXBPYmplY3RzXCIpO1xubGV0IG1pbmlNYXBTY2FsZSA9IDg7XG5sZXQgbGFzdFRpbWUgPSAwO1xuY29uc3Qgc2NyZWVuV2lkdGggPSAzMjA7XG5jb25zdCBzY3JlZW5IZWlnaHQgPSAyMDA7XG5jb25zdCBzdHJpcFdpZHRoID0gMjtcbmNvbnN0IGZvdiA9ICg2MCAqIE1hdGguUEkpIC8gMTgwO1xuY29uc3QgZm92SGFsZiA9IGZvdiAvIDI7XG5jb25zdCBudW1SYXlzID0gTWF0aC5jZWlsKHNjcmVlbldpZHRoIC8gc3RyaXBXaWR0aCk7XG5jb25zdCB2aWV3RGlzdCA9IHNjcmVlbldpZHRoIC8gMiAvIE1hdGgudGFuKGZvdkhhbGYpO1xuY29uc3QgdHdvUEkgPSBNYXRoLlBJICogMjtcbmNvbnN0IG51bVRleHR1cmVzID0gNDtcbmNvbnN0IGRlYnVnU2NyZWVuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkZWJ1Z1NjcmVlblwiKTtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gXCJtYWlubWVudVwiO1xuICAgICAgICB0aGlzLm1hcFdpZHRoID0gMDtcbiAgICAgICAgdGhpcy5tYXBIZWlnaHQgPSAwO1xuICAgICAgICB0aGlzLmRyYXdNaW5pTWFwID0gKCkgPT4ge1xuICAgICAgICAgICAgbWluaU1hcC53aWR0aCA9IHRoaXMubWFwV2lkdGggKiBtaW5pTWFwU2NhbGU7XG4gICAgICAgICAgICBtaW5pTWFwLmhlaWdodCA9IHRoaXMubWFwSGVpZ2h0ICogbWluaU1hcFNjYWxlO1xuICAgICAgICAgICAgbWluaU1hcC5zdHlsZS53aWR0aCA9IGAke3RoaXMubWFwV2lkdGggKiBtaW5pTWFwU2NhbGV9cHhgO1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gbWluaU1hcC5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IHRoaXMubWFwSGVpZ2h0OyB5KyspIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHRoaXMubWFwV2lkdGg7IHgrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5sZXZlbC5tYXBbeV1beF0gPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gXCJibGFja1wiO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KHggKiBtaW5pTWFwU2NhbGUsIHkgKiBtaW5pTWFwU2NhbGUsIG1pbmlNYXBTY2FsZSwgbWluaU1hcFNjYWxlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy51cGRhdGVNaW5pTWFwID0gKCkgPT4ge1xuICAgICAgICAgICAgbWluaU1hcE9iamVjdHMud2lkdGggPSB0aGlzLm1hcFdpZHRoICogbWluaU1hcFNjYWxlO1xuICAgICAgICAgICAgbWluaU1hcE9iamVjdHMuaGVpZ2h0ID0gdGhpcy5tYXBIZWlnaHQgKiBtaW5pTWFwU2NhbGU7XG4gICAgICAgICAgICBjb25zdCBjdHggPSBtaW5pTWFwT2JqZWN0cy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIG1pbmlNYXAud2lkdGgsIG1pbmlNYXAuaGVpZ2h0KTtcbiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBcInllbGxvd2dyZWVuXCI7XG4gICAgICAgICAgICBjdHguZmlsbFJlY3QodGhpcy5wbGF5ZXIucG9zLnggKiBtaW5pTWFwU2NhbGUgLSAyLCB0aGlzLnBsYXllci5wb3MueSAqIG1pbmlNYXBTY2FsZSAtIDIsIDQsIDQpO1xuICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgY3R4Lm1vdmVUbyh0aGlzLnBsYXllci5wb3MueCAqIG1pbmlNYXBTY2FsZSwgdGhpcy5wbGF5ZXIucG9zLnkgKiBtaW5pTWFwU2NhbGUpO1xuICAgICAgICAgICAgY3R4LmxpbmVUbygodGhpcy5wbGF5ZXIucG9zLnggKyBNYXRoLmNvcyh0aGlzLnBsYXllci5yb3RhdGlvbikgKiA0KSAqIG1pbmlNYXBTY2FsZSwgKHRoaXMucGxheWVyLnBvcy55ICsgTWF0aC5zaW4odGhpcy5wbGF5ZXIucm90YXRpb24pICogNCkgKiBtaW5pTWFwU2NhbGUpO1xuICAgICAgICAgICAgY3R4LmNsb3NlUGF0aCgpO1xuICAgICAgICAgICAgY3R4LnN0cm9rZSgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnBsYXllciA9IG5ldyBQbGF5ZXIoXCJwbGF5ZXJcIik7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSBuZXcgUmVuZGVyZXIoKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFwibWFpbm1lbnVcIjtcbiAgICAgICAgdGhpcy5sZXZlbCA9IGxldmVsc1swXTtcbiAgICAgICAgdGhpcy5zZXR1cCgpO1xuICAgIH1cbiAgICBjYXN0UmF5cygpIHtcbiAgICAgICAgbGV0IHN0cmlwSWR4ID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1SYXlzOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHJheVNjcmVlblBvcyA9ICgtbnVtUmF5cyAvIDIgKyBpKSAqIHN0cmlwV2lkdGg7XG4gICAgICAgICAgICBjb25zdCByYXlWaWV3RGlzdCA9IE1hdGguc3FydChyYXlTY3JlZW5Qb3MgKiByYXlTY3JlZW5Qb3MgKyB2aWV3RGlzdCAqIHZpZXdEaXN0KTtcbiAgICAgICAgICAgIGNvbnN0IHJheUFuZ2xlID0gTWF0aC5hc2luKHJheVNjcmVlblBvcyAvIHJheVZpZXdEaXN0KTtcbiAgICAgICAgICAgIHRoaXMuY2FzdFNpbmdsZVJheSh0aGlzLnBsYXllci5yb3RhdGlvbiArIHJheUFuZ2xlLCBzdHJpcElkeCsrKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXN0U2luZ2xlUmF5KHJheUFuZ2xlLCBzdHJpcElkeCkge1xuICAgICAgICAvLyBmaXJzdCBtYWtlIHN1cmUgdGhlIGFuZ2xlIGlzIGJldHdlZW4gMCBhbmQgMzYwIGRlZ3JlZXNcbiAgICAgICAgcmF5QW5nbGUgJT0gdHdvUEk7XG4gICAgICAgIGlmIChyYXlBbmdsZSA8IDApXG4gICAgICAgICAgICByYXlBbmdsZSArPSB0d29QSTtcbiAgICAgICAgLy8gbW92aW5nIHJpZ2h0L2xlZnQ/IHVwL2Rvd24/IERldGVybWluZWQgYnkgd2hpY2ggcXVhZHJhbnQgdGhlIGFuZ2xlIGlzIGluLlxuICAgICAgICB2YXIgcmlnaHQgPSByYXlBbmdsZSA+IHR3b1BJICogMC43NSB8fCByYXlBbmdsZSA8IHR3b1BJICogMC4yNTtcbiAgICAgICAgdmFyIHVwID0gcmF5QW5nbGUgPCAwIHx8IHJheUFuZ2xlID4gTWF0aC5QSTtcbiAgICAgICAgdmFyIHdhbGxUeXBlID0gMDtcbiAgICAgICAgLy8gb25seSBkbyB0aGVzZSBvbmNlXG4gICAgICAgIHZhciBhbmdsZVNpbiA9IE1hdGguc2luKHJheUFuZ2xlKTtcbiAgICAgICAgdmFyIGFuZ2xlQ29zID0gTWF0aC5jb3MocmF5QW5nbGUpO1xuICAgICAgICB2YXIgZGlzdCA9IDA7IC8vIHRoZSBkaXN0YW5jZSB0byB0aGUgYmxvY2sgd2UgaGl0XG4gICAgICAgIHZhciB4SGl0ID0gMDsgLy8gdGhlIHggYW5kIHkgY29vcmQgb2Ygd2hlcmUgdGhlIHJheSBoaXQgdGhlIGJsb2NrXG4gICAgICAgIHZhciB5SGl0ID0gMDtcbiAgICAgICAgdmFyIHRleHR1cmVYID0gMDsgLy8gdGhlIHgtY29vcmQgb24gdGhlIHRleHR1cmUgb2YgdGhlIGJsb2NrLCBpZS4gd2hhdCBwYXJ0IG9mIHRoZSB0ZXh0dXJlIGFyZSB3ZSBnb2luZyB0byByZW5kZXJcbiAgICAgICAgdmFyIHdhbGxYOyAvLyB0aGUgKHgseSkgbWFwIGNvb3JkcyBvZiB0aGUgYmxvY2tcbiAgICAgICAgdmFyIHdhbGxZO1xuICAgICAgICB2YXIgd2FsbElzSG9yaXpvbnRhbCA9IGZhbHNlO1xuICAgICAgICAvLyBmaXJzdCBjaGVjayBhZ2FpbnN0IHRoZSB2ZXJ0aWNhbCBtYXAvd2FsbCBsaW5lc1xuICAgICAgICAvLyB3ZSBkbyB0aGlzIGJ5IG1vdmluZyB0byB0aGUgcmlnaHQgb3IgbGVmdCBlZGdlIG9mIHRoZSBibG9jayB3ZSdyZSBzdGFuZGluZyBpblxuICAgICAgICAvLyBhbmQgdGhlbiBtb3ZpbmcgaW4gMSBtYXAgdW5pdCBzdGVwcyBob3Jpem9udGFsbHkuIFRoZSBhbW91bnQgd2UgaGF2ZSB0byBtb3ZlIHZlcnRpY2FsbHlcbiAgICAgICAgLy8gaXMgZGV0ZXJtaW5lZCBieSB0aGUgc2xvcGUgb2YgdGhlIHJheSwgd2hpY2ggaXMgc2ltcGx5IGRlZmluZWQgYXMgc2luKGFuZ2xlKSAvIGNvcyhhbmdsZSkuXG4gICAgICAgIHZhciBzbG9wZSA9IGFuZ2xlU2luIC8gYW5nbGVDb3M7IC8vIHRoZSBzbG9wZSBvZiB0aGUgc3RyYWlnaHQgbGluZSBtYWRlIGJ5IHRoZSByYXlcbiAgICAgICAgdmFyIGRYVmVyID0gcmlnaHQgPyAxIDogLTE7IC8vIHdlIG1vdmUgZWl0aGVyIDEgbWFwIHVuaXQgdG8gdGhlIGxlZnQgb3IgcmlnaHRcbiAgICAgICAgdmFyIGRZVmVyID0gZFhWZXIgKiBzbG9wZTsgLy8gaG93IG11Y2ggdG8gbW92ZSB1cCBvciBkb3duXG4gICAgICAgIHZhciB4ID0gcmlnaHRcbiAgICAgICAgICAgID8gTWF0aC5jZWlsKHRoaXMucGxheWVyLnBvcy54KVxuICAgICAgICAgICAgOiBNYXRoLmZsb29yKHRoaXMucGxheWVyLnBvcy54KTsgLy8gc3RhcnRpbmcgaG9yaXpvbnRhbCBwb3NpdGlvbiwgYXQgb25lIG9mIHRoZSBlZGdlcyBvZiB0aGUgY3VycmVudCBtYXAgYmxvY2tcbiAgICAgICAgdmFyIHkgPSB0aGlzLnBsYXllci5wb3MueSArICh4IC0gdGhpcy5wbGF5ZXIucG9zLngpICogc2xvcGU7IC8vIHN0YXJ0aW5nIHZlcnRpY2FsIHBvc2l0aW9uLiBXZSBhZGQgdGhlIHNtYWxsIGhvcml6b250YWwgc3RlcCB3ZSBqdXN0IG1hZGUsIG11bHRpcGxpZWQgYnkgdGhlIHNsb3BlLlxuICAgICAgICB3aGlsZSAoeCA+PSAwICYmIHggPCB0aGlzLm1hcFdpZHRoICYmIHkgPj0gMCAmJiB5IDwgdGhpcy5tYXBIZWlnaHQpIHtcbiAgICAgICAgICAgIHZhciB3YWxsWCA9IE1hdGguZmxvb3IoeCArIChyaWdodCA/IDAgOiAtMSkpO1xuICAgICAgICAgICAgdmFyIHdhbGxZID0gTWF0aC5mbG9vcih5KTtcbiAgICAgICAgICAgIC8vIGlzIHRoaXMgcG9pbnQgaW5zaWRlIGEgd2FsbCBibG9jaz9cbiAgICAgICAgICAgIGlmICh0aGlzLmxldmVsLm1hcFt3YWxsWV1bd2FsbFhdID4gMCkge1xuICAgICAgICAgICAgICAgIHZhciBkaXN0WCA9IHggLSB0aGlzLnBsYXllci5wb3MueDtcbiAgICAgICAgICAgICAgICB2YXIgZGlzdFkgPSB5IC0gdGhpcy5wbGF5ZXIucG9zLnk7XG4gICAgICAgICAgICAgICAgZGlzdCA9IGRpc3RYICogZGlzdFggKyBkaXN0WSAqIGRpc3RZOyAvLyB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgcGxheWVyIHRvIHRoaXMgcG9pbnQsIHNxdWFyZWQuXG4gICAgICAgICAgICAgICAgd2FsbFR5cGUgPSB0aGlzLmxldmVsLm1hcFt3YWxsWV1bd2FsbFhdOyAvLyB3ZSdsbCByZW1lbWJlciB0aGUgdHlwZSBvZiB3YWxsIHdlIGhpdCBmb3IgbGF0ZXJcbiAgICAgICAgICAgICAgICB0ZXh0dXJlWCA9IHkgJSAxOyAvLyB3aGVyZSBleGFjdGx5IGFyZSB3ZSBvbiB0aGUgd2FsbD8gdGV4dHVyZVggaXMgdGhlIHggY29vcmRpbmF0ZSBvbiB0aGUgdGV4dHVyZSB0aGF0IHdlJ2xsIHVzZSBsYXRlciB3aGVuIHRleHR1cmluZyB0aGUgd2FsbC5cbiAgICAgICAgICAgICAgICBpZiAoIXJpZ2h0KVxuICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlWCA9IDEgLSB0ZXh0dXJlWDsgLy8gaWYgd2UncmUgbG9va2luZyB0byB0aGUgbGVmdCBzaWRlIG9mIHRoZSBtYXAsIHRoZSB0ZXh0dXJlIHNob3VsZCBiZSByZXZlcnNlZFxuICAgICAgICAgICAgICAgIHhIaXQgPSB4OyAvLyBzYXZlIHRoZSBjb29yZGluYXRlcyBvZiB0aGUgaGl0LiBXZSBvbmx5IHJlYWxseSB1c2UgdGhlc2UgdG8gZHJhdyB0aGUgcmF5cyBvbiBtaW5pbWFwLlxuICAgICAgICAgICAgICAgIHlIaXQgPSB5O1xuICAgICAgICAgICAgICAgIHdhbGxJc0hvcml6b250YWwgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeCArPSBkWFZlcjtcbiAgICAgICAgICAgIHkgKz0gZFlWZXI7XG4gICAgICAgIH1cbiAgICAgICAgLy8gbm93IGNoZWNrIGFnYWluc3QgaG9yaXpvbnRhbCBsaW5lcy4gSXQncyBiYXNpY2FsbHkgdGhlIHNhbWUsIGp1c3QgXCJ0dXJuZWQgYXJvdW5kXCIuXG4gICAgICAgIC8vIHRoZSBvbmx5IGRpZmZlcmVuY2UgaGVyZSBpcyB0aGF0IG9uY2Ugd2UgaGl0IGEgbWFwIGJsb2NrLFxuICAgICAgICAvLyB3ZSBjaGVjayBpZiB0aGVyZSB3ZSBhbHNvIGZvdW5kIG9uZSBpbiB0aGUgZWFybGllciwgdmVydGljYWwgcnVuLiBXZSdsbCBrbm93IHRoYXQgaWYgZGlzdCAhPSAwLlxuICAgICAgICAvLyBJZiBzbywgd2Ugb25seSByZWdpc3RlciB0aGlzIGhpdCBpZiB0aGlzIGRpc3RhbmNlIGlzIHNtYWxsZXIuXG4gICAgICAgIHZhciBzbG9wZSA9IGFuZ2xlQ29zIC8gYW5nbGVTaW47XG4gICAgICAgIHZhciBkWUhvciA9IHVwID8gLTEgOiAxO1xuICAgICAgICB2YXIgZFhIb3IgPSBkWUhvciAqIHNsb3BlO1xuICAgICAgICB2YXIgeSA9IHVwID8gTWF0aC5mbG9vcih0aGlzLnBsYXllci5wb3MueSkgOiBNYXRoLmNlaWwodGhpcy5wbGF5ZXIucG9zLnkpO1xuICAgICAgICB2YXIgeCA9IHRoaXMucGxheWVyLnBvcy54ICsgKHkgLSB0aGlzLnBsYXllci5wb3MueSkgKiBzbG9wZTtcbiAgICAgICAgd2hpbGUgKHggPj0gMCAmJiB4IDwgdGhpcy5tYXBXaWR0aCAmJiB5ID49IDAgJiYgeSA8IHRoaXMubWFwSGVpZ2h0KSB7XG4gICAgICAgICAgICB2YXIgd2FsbFggPSBNYXRoLmZsb29yKHkgKyAocmlnaHQgPyAwIDogLTEpKTtcbiAgICAgICAgICAgIHZhciB3YWxsWSA9IHkgPj4gMDtcbiAgICAgICAgICAgIGlmICh0aGlzLmxldmVsLm1hcFt3YWxsWV1bd2FsbFhdID4gMCkge1xuICAgICAgICAgICAgICAgIHZhciBkaXN0WCA9IHggLSB0aGlzLnBsYXllci5wb3MueDtcbiAgICAgICAgICAgICAgICB2YXIgZGlzdFkgPSB5IC0gdGhpcy5wbGF5ZXIucG9zLnk7XG4gICAgICAgICAgICAgICAgdmFyIGJsb2NrRGlzdCA9IGRpc3RYICogZGlzdFggKyBkaXN0WSAqIGRpc3RZO1xuICAgICAgICAgICAgICAgIGlmICghZGlzdCB8fCBibG9ja0Rpc3QgPCBkaXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGRpc3QgPSBibG9ja0Rpc3Q7XG4gICAgICAgICAgICAgICAgICAgIHhIaXQgPSB4O1xuICAgICAgICAgICAgICAgICAgICB5SGl0ID0geTtcbiAgICAgICAgICAgICAgICAgICAgd2FsbFR5cGUgPSB0aGlzLmxldmVsLm1hcFt3YWxsWV1bd2FsbFhdO1xuICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlWCA9IHggJSAxO1xuICAgICAgICAgICAgICAgICAgICBpZiAodXApXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlWCA9IDEgLSB0ZXh0dXJlWDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB4ICs9IGRYSG9yO1xuICAgICAgICAgICAgeSArPSBkWUhvcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGlzdCkge1xuICAgICAgICAgICAgdGhpcy5kcmF3UmF5KHhIaXQsIHlIaXQpO1xuICAgICAgICAgICAgdmFyIHN0cmlwID0gdGhpcy5yZW5kZXJlci5zY3JlZW5TdHJpcHNbc3RyaXBJZHhdO1xuICAgICAgICAgICAgZGlzdCA9IE1hdGguc3FydChkaXN0KTtcbiAgICAgICAgICAgIC8vIHVzZSBwZXJwZW5kaWN1bGFyIGRpc3RhbmNlIHRvIGFkanVzdCBmb3IgZmlzaCBleWVcbiAgICAgICAgICAgIC8vIGRpc3RvcnRlZF9kaXN0ID0gY29ycmVjdF9kaXN0IC8gY29zKHJlbGF0aXZlX2FuZ2xlX29mX3JheSlcbiAgICAgICAgICAgIGRpc3QgPSBkaXN0ICogTWF0aC5jb3ModGhpcy5wbGF5ZXIucm90YXRpb24gLSByYXlBbmdsZSk7XG4gICAgICAgICAgICAvLyBub3cgY2FsYyB0aGUgcG9zaXRpb24sIGhlaWdodCBhbmQgd2lkdGggb2YgdGhlIHdhbGwgc3RyaXBcbiAgICAgICAgICAgIC8vIFwicmVhbFwiIHdhbGwgaGVpZ2h0IGluIHRoZSBnYW1lIHdvcmxkIGlzIDEgdW5pdCwgdGhlIGRpc3RhbmNlIGZyb20gdGhlIHBsYXllciB0byB0aGUgc2NyZWVuIGlzIHZpZXdEaXN0LFxuICAgICAgICAgICAgLy8gdGh1cyB0aGUgaGVpZ2h0IG9uIHRoZSBzY3JlZW4gaXMgZXF1YWwgdG8gd2FsbF9oZWlnaHRfcmVhbCAqIHZpZXdEaXN0IC8gZGlzdFxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSBNYXRoLnJvdW5kKHZpZXdEaXN0IC8gZGlzdCk7XG4gICAgICAgICAgICAvLyB3aWR0aCBpcyB0aGUgc2FtZSwgYnV0IHdlIGhhdmUgdG8gc3RyZXRjaCB0aGUgdGV4dHVyZSB0byBhIGZhY3RvciBvZiBzdHJpcFdpZHRoIHRvIG1ha2UgaXQgZmlsbCB0aGUgc3RyaXAgY29ycmVjdGx5XG4gICAgICAgICAgICB2YXIgd2lkdGggPSBoZWlnaHQgKiBzdHJpcFdpZHRoO1xuICAgICAgICAgICAgLy8gdG9wIHBsYWNlbWVudCBpcyBlYXN5IHNpbmNlIGV2ZXJ5dGhpbmcgaXMgY2VudGVyZWQgb24gdGhlIHgtYXhpcywgc28gd2Ugc2ltcGx5IG1vdmVcbiAgICAgICAgICAgIC8vIGl0IGhhbGYgd2F5IGRvd24gdGhlIHNjcmVlbiBhbmQgdGhlbiBoYWxmIHRoZSB3YWxsIGhlaWdodCBiYWNrIHVwLlxuICAgICAgICAgICAgdmFyIHRvcCA9IE1hdGgucm91bmQoKHNjcmVlbkhlaWdodCAtIGhlaWdodCkgLyAyKTtcbiAgICAgICAgICAgIHN0cmlwLnN0eWxlLmhlaWdodCA9IGhlaWdodCArIFwicHhcIjtcbiAgICAgICAgICAgIHN0cmlwLnN0eWxlLnRvcCA9IHRvcCArIFwicHhcIjtcbiAgICAgICAgICAgIC8vQHRzLWlnbm9yZVxuICAgICAgICAgICAgc3RyaXAuaW1nLnN0eWxlLmhlaWdodCA9IE1hdGguZmxvb3IoaGVpZ2h0ICogbnVtVGV4dHVyZXMpICsgXCJweFwiO1xuICAgICAgICAgICAgLy9AdHMtaWdub3JlXG4gICAgICAgICAgICBzdHJpcC5pbWcuc3R5bGUud2lkdGggPSBNYXRoLmZsb29yKHdpZHRoICogMikgKyBcInB4XCI7XG4gICAgICAgICAgICAvL0B0cy1pZ25vcmVcbiAgICAgICAgICAgIHN0cmlwLmltZy5zdHlsZS50b3AgPSAtTWF0aC5mbG9vcihoZWlnaHQgKiAod2FsbFR5cGUgLSAxKSkgKyBcInB4XCI7XG4gICAgICAgICAgICB2YXIgdGV4WCA9IE1hdGgucm91bmQodGV4dHVyZVggKiB3aWR0aCk7XG4gICAgICAgICAgICBpZiAodGV4WCA+IHdpZHRoIC0gc3RyaXBXaWR0aClcbiAgICAgICAgICAgICAgICB0ZXhYID0gd2lkdGggLSBzdHJpcFdpZHRoO1xuICAgICAgICAgICAgLy9AdHMtaWdub3JlXG4gICAgICAgICAgICBzdHJpcC5pbWcuc3R5bGUubGVmdCA9IC10ZXhYICsgXCJweFwiO1xuICAgICAgICB9XG4gICAgfVxuICAgIGJpbmRLZXlzKCkge1xuICAgICAgICBjb25zdCBoYW5kID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNoYW5kXCIpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSkgPT4ge1xuICAgICAgICAgICAgc3dpdGNoIChlLmNvZGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwiS2V5V1wiOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXllci5zcGVlZCA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGhhbmQuc3R5bGUuYW5pbWF0aW9uID0gXCJ3YWxrIDEuNXMgaW5maW5pdGVcIjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIktleVNcIjpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIuc3BlZWQgPSAtMTtcbiAgICAgICAgICAgICAgICAgICAgaGFuZC5zdHlsZS5hbmltYXRpb24gPSBcIndhbGsgMS41cyBpbmZpbml0ZVwiO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiS2V5QVwiOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXllci5kaXJlY3Rpb24gPSAtMTtcbiAgICAgICAgICAgICAgICAgICAgaGFuZC5zdHlsZS5hbmltYXRpb24gPSBcIndhbGsgMS41cyBpbmZpbml0ZVwiO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiS2V5RFwiOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXllci5kaXJlY3Rpb24gPSAxO1xuICAgICAgICAgICAgICAgICAgICBoYW5kLnN0eWxlLmFuaW1hdGlvbiA9IFwid2FsayAxLjVzIGluZmluaXRlXCI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIChlKSA9PiB7XG4gICAgICAgICAgICBzd2l0Y2ggKGUuY29kZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJLZXlXXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcIktleVNcIjpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIuc3BlZWQgPSAwO1xuICAgICAgICAgICAgICAgICAgICBoYW5kLnN0eWxlLmFuaW1hdGlvbiA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJLZXlBXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcIktleURcIjpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIuZGlyZWN0aW9uID0gMDtcbiAgICAgICAgICAgICAgICAgICAgaGFuZC5zdHlsZS5hbmltYXRpb24gPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRyYXdSYXkocmF5WCwgcmF5WSkge1xuICAgICAgICBjb25zdCBtaW5pTWFwT2JqZWN0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbWluaU1hcE9iamVjdHNcIik7XG4gICAgICAgIHZhciBvYmplY3RDdHggPSBtaW5pTWFwT2JqZWN0cy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgICAgIG9iamVjdEN0eC5zdHJva2VTdHlsZSA9IFwicmdiYSgwLDEwMCwwLDAuMylcIjtcbiAgICAgICAgb2JqZWN0Q3R4LmxpbmVXaWR0aCA9IDAuNTtcbiAgICAgICAgb2JqZWN0Q3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICBvYmplY3RDdHgubW92ZVRvKHRoaXMucGxheWVyLnBvcy54ICogbWluaU1hcFNjYWxlLCB0aGlzLnBsYXllci5wb3MueSAqIG1pbmlNYXBTY2FsZSk7XG4gICAgICAgIG9iamVjdEN0eC5saW5lVG8ocmF5WCAqIG1pbmlNYXBTY2FsZSwgcmF5WSAqIG1pbmlNYXBTY2FsZSk7XG4gICAgICAgIG9iamVjdEN0eC5jbG9zZVBhdGgoKTtcbiAgICAgICAgb2JqZWN0Q3R4LnN0cm9rZSgpO1xuICAgIH1cbiAgICBzZXR1cCgpIHtcbiAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImNhbnZhc1wiKTtcbiAgICAgICAgY2FudmFzLndpZHRoID0gMTYwO1xuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gMTIwO1xuICAgICAgICB0aGlzLm1hcFdpZHRoID0gdGhpcy5sZXZlbC5tYXBbMF0ubGVuZ3RoO1xuICAgICAgICB0aGlzLm1hcEhlaWdodCA9IHRoaXMubGV2ZWwubWFwLmxlbmd0aDtcbiAgICAgICAgdGhpcy5iaW5kS2V5cygpO1xuICAgICAgICB0aGlzLmRyYXdNaW5pTWFwKCk7XG4gICAgICAgIHRoaXMubG9vcCgwKTtcbiAgICB9XG4gICAgaXNCbG9ja2luZyh4LCB5KSB7XG4gICAgICAgIC8vIGZpcnN0IG1ha2Ugc3VyZSB0aGF0IHdlIGNhbm5vdCBtb3ZlIG91dHNpZGUgdGhlIGJvdW5kYXJpZXMgb2YgdGhlIGxldmVsXG4gICAgICAgIGlmICh5IDwgMCB8fCB5ID49IHRoaXMubWFwSGVpZ2h0IHx8IHggPCAwIHx8IHggPj0gdGhpcy5tYXBXaWR0aClcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAvLyByZXR1cm4gdHJ1ZSBpZiB0aGUgbWFwIGJsb2NrIGlzIG5vdCAwLCBpZS4gaWYgdGhlcmUgaXMgYSBibG9ja2luZyB3YWxsLlxuICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMubGV2ZWwubWFwW01hdGguZmxvb3IoeSldW01hdGguZmxvb3IoeCldKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubGV2ZWwubWFwW01hdGguZmxvb3IoeSldW01hdGguZmxvb3IoeCldICE9PSAwO1xuICAgIH1cbiAgICBtb3ZlUGxheWVyKCkge1xuICAgICAgICBjb25zdCBtb3ZlU3RlcCA9IHRoaXMucGxheWVyLm1vdmVTcGVlZCAqIHRoaXMucGxheWVyLnNwZWVkO1xuICAgICAgICB0aGlzLnBsYXllci5yb3RhdGlvbiArPSB0aGlzLnBsYXllci5kaXJlY3Rpb24gKiB0aGlzLnBsYXllci5yb3RhdGlvblNwZWVkO1xuICAgICAgICBjb25zdCBuZXdYID0gdGhpcy5wbGF5ZXIucG9zLnggKyBNYXRoLmNvcyh0aGlzLnBsYXllci5yb3RhdGlvbikgKiBtb3ZlU3RlcDtcbiAgICAgICAgY29uc3QgbmV3WSA9IHRoaXMucGxheWVyLnBvcy55ICsgTWF0aC5zaW4odGhpcy5wbGF5ZXIucm90YXRpb24pICogbW92ZVN0ZXA7XG4gICAgICAgIGlmICh0aGlzLmlzQmxvY2tpbmcobmV3WCwgbmV3WSkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiaXMgY29sbGlkZVwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBsYXllci5wb3MueCA9IG5ld1g7XG4gICAgICAgIHRoaXMucGxheWVyLnBvcy55ID0gbmV3WTtcbiAgICAgICAgdGhpcy5wbGF5ZXIucm90YXRpb24gKz0gdGhpcy5wbGF5ZXIuZGlyZWN0aW9uICogdGhpcy5wbGF5ZXIucm90YXRpb25TcGVlZDtcbiAgICAgICAgaWYgKHRoaXMucGxheWVyLnJvdGF0aW9uIDwgMClcbiAgICAgICAgICAgIHRoaXMucGxheWVyLnJvdGF0aW9uICs9IE1hdGguUEkgKiAyO1xuICAgICAgICBpZiAodGhpcy5wbGF5ZXIucm90YXRpb24gPj0gTWF0aC5QSSAqIDIpXG4gICAgICAgICAgICB0aGlzLnBsYXllci5yb3RhdGlvbiAtPSBNYXRoLlBJICogMjtcbiAgICB9XG4gICAgdXBkYXRlKGR0KSB7XG4gICAgICAgIHRoaXMubW92ZVBsYXllcigpO1xuICAgICAgICB0aGlzLnVwZGF0ZU1pbmlNYXAoKTtcbiAgICAgICAgdGhpcy5jYXN0UmF5cygpO1xuICAgICAgICBkZWJ1Z1NjcmVlbi5pbm5lclRleHQgPSBgXG4gICAgICBGUFM6ICR7TWF0aC5yb3VuZCgxIC8gZHQpfVxuICAgICAgUExBWUVSIFg6ICR7dGhpcy5wbGF5ZXIucG9zLnh9XG4gICAgICBQTEFZRVIgWTogJHt0aGlzLnBsYXllci5wb3MueX1cbiAgICAgIERUOiAke2R0fVxuICAgIGA7XG4gICAgfVxuICAgIGxvb3AodHMpIHtcbiAgICAgICAgY29uc3QgZHQgPSBsYXN0VGltZSAtIHRzO1xuICAgICAgICBsYXN0VGltZSA9IHRzO1xuICAgICAgICB0aGlzLnVwZGF0ZShkdCk7XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmxvb3AuYmluZCh0aGlzKSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IEdhbWUgZnJvbSBcIi4vZ2FtZVwiO1xuY29uc3QgZ2FtZSA9IG5ldyBHYW1lKCk7XG4vL0B0cy1pZ25vcmVcbndpbmRvdy5nYW1lID0gZ2FtZTtcbmdhbWUuc2V0dXAoKTtcbiJdLCJuYW1lcyI6WyJQZXJzb24iLCJjb25zdHJ1Y3RvciIsImlkIiwidGhpcyIsInBvcyIsIngiLCJ5Iiwic3BlZWQiLCJtb3ZlU3BlZWQiLCJyb3RhdGlvbiIsImRpcmVjdGlvbiIsInJvdGF0aW9uU3BlZWQiLCJQbGF5ZXIiLCJzdXBlciIsIk1hdGgiLCJQSSIsIlJlbmRlcmVyIiwic3RyaXBXaWR0aCIsInNjcmVlblN0cmlwcyIsInNjcmVlbiIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsIndpZHRoIiwiaGVpZ2h0IiwiYm9keSIsInByZXBlbmQiLCJpbml0IiwiZmxvb3IiLCJjZWlsaW5nIiwibGV2ZWwiLCJoYW5kIiwiYXBwZW5kQ2hpbGQiLCJpIiwic3RyaXAiLCJzdHlsZSIsInBvc2l0aW9uIiwibGVmdCIsIm92ZXJmbG93IiwiYmFja2dyb3VuZENvbG9yIiwiaW1nIiwiSW1hZ2UiLCJzcmMiLCJwdXNoIiwiZHJhd1JheSIsImNhc3RTaW5nbGVSYXkiLCJkcmF3TWluaU1hcCIsInVwZGF0ZU1pbmlNYXAiLCJHYW1lU3RhdGUiLCJtaW5pTWFwIiwicXVlcnlTZWxlY3RvciIsIm1pbmlNYXBPYmplY3RzIiwibGFzdFRpbWUiLCJmb3ZIYWxmIiwibnVtUmF5cyIsImNlaWwiLCJzY3JlZW5XaWR0aCIsInZpZXdEaXN0IiwidGFuIiwidHdvUEkiLCJkZWJ1Z1NjcmVlbiIsImdhbWUiLCJzdGF0ZSIsIm1hcFdpZHRoIiwibWFwSGVpZ2h0IiwiY3R4IiwiZ2V0Q29udGV4dCIsIm1hcCIsImZpbGxTdHlsZSIsImZpbGxSZWN0IiwiY2xlYXJSZWN0IiwicGxheWVyIiwiYmVnaW5QYXRoIiwibW92ZVRvIiwibGluZVRvIiwiY29zIiwic2luIiwiY2xvc2VQYXRoIiwic3Ryb2tlIiwicmVuZGVyZXIiLCJzZXR1cCIsImNhc3RSYXlzIiwic3RyaXBJZHgiLCJyYXlTY3JlZW5Qb3MiLCJyYXlWaWV3RGlzdCIsInNxcnQiLCJyYXlBbmdsZSIsImFzaW4iLCJyaWdodCIsInVwIiwid2FsbFR5cGUiLCJhbmdsZVNpbiIsImFuZ2xlQ29zIiwiZGlzdCIsInhIaXQiLCJ5SGl0IiwidGV4dHVyZVgiLCJkWFZlciIsImRZVmVyIiwic2xvcGUiLCJ3YWxsWCIsIndhbGxZIiwiZGlzdFgiLCJkaXN0WSIsImRZSG9yIiwiZFhIb3IiLCJibG9ja0Rpc3QiLCJyb3VuZCIsInRvcCIsInRleFgiLCJiaW5kS2V5cyIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiY29kZSIsImFuaW1hdGlvbiIsInJheVgiLCJyYXlZIiwib2JqZWN0Q3R4Iiwic3Ryb2tlU3R5bGUiLCJsaW5lV2lkdGgiLCJjYW52YXMiLCJsZW5ndGgiLCJsb29wIiwiaXNCbG9ja2luZyIsIm1vdmVQbGF5ZXIiLCJtb3ZlU3RlcCIsIm5ld1giLCJuZXdZIiwiY29uc29sZSIsImxvZyIsInVwZGF0ZSIsImR0IiwiaW5uZXJUZXh0IiwidHMiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJiaW5kIiwid2luZG93Il0sInNvdXJjZVJvb3QiOiIifQ==